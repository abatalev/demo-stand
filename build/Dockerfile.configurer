FROM maven:3.6.3 AS build
COPY configurer/pom.xml /work/pom.xml
RUN cd /work; mvn -B dependency:go-offline 
COPY configurer/src/ /work/src/
RUN cd /work; mvn clean install 
FROM bellsoft/liberica-openjre-alpine-musl:21.0.8-12
COPY app.sh /opt/app/app.sh
RUN chmod +x /opt/app/app.sh
COPY --from=build work/target/app.jar opt/app/app.jar
EXPOSE 8080
ENTRYPOINT [ "/opt/app/app.sh" ]